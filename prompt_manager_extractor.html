<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ä»˜ãè¨˜äº‹æŠ½å‡ºãƒ„ãƒ¼ãƒ«</title>
    <style>
        body { font-family: Arial; max-width: 900px; margin: 20px auto; padding: 20px; background: #f5f5f5; }
        .container { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; }
        h2 { color: #444; border-bottom: 2px solid #4CAF50; padding-bottom: 10px; }
        .tabs { display: flex; margin-bottom: 20px; border-bottom: 2px solid #ddd; }
        .tab { padding: 15px 25px; cursor: pointer; border: none; background: #f8f9fa; margin-right: 5px; border-radius: 5px 5px 0 0; }
        .tab.active { background: #4CAF50; color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        input, textarea, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; margin: 10px 0; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #45a049; }
        button.secondary { background: #6c757d; }
        button.secondary:hover { background: #5a6268; }
        button.danger { background: #dc3545; }
        button.danger:hover { background: #c82333; }
        .status { padding: 12px; margin: 10px 0; border-radius: 4px; font-weight: bold; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .loading { background: #fff3cd; color: #856404; }
        .hidden { display: none; }
        .prompt-item { background: #f8f9fa; border: 1px solid #dee2e6; padding: 15px; margin: 10px 0; border-radius: 4px; }
        .prompt-actions { display: flex; gap: 10px; margin-top: 10px; }
        .prompt-actions button { width: auto; padding: 8px 16px; margin: 0; }
        .info-box { background: #e7f3ff; border: 1px solid #b3d9ff; padding: 15px; margin: 15px 0; border-radius: 4px; }
        .manual-section { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 15px 0; border-radius: 4px; }
        .url-item { background: #f8f9fa; border: 1px solid #dee2e6; padding: 15px; margin: 10px 0; border-radius: 4px; }
        .url-link { color: #007bff; font-weight: bold; text-decoration: none; }
        .url-link:hover { text-decoration: underline; }
        .preview { background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 4px; border: 1px solid #dee2e6; }
        .genre-selector { background: #e8f5e8; border: 1px solid #c3e6cb; padding: 15px; margin: 15px 0; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ä»˜ãè¨˜äº‹æŠ½å‡ºãƒ„ãƒ¼ãƒ«</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('prompts')">ğŸ“ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†</button>
            <button class="tab" onclick="switchTab('extraction')">ğŸ“„ è¨˜äº‹æŠ½å‡º</button>
        </div>

        <!-- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ã‚¿ãƒ– -->
        <div id="prompts-tab" class="tab-content active">
            <h2>ğŸ“ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†</h2>
            
            <div class="info-box">
                <h4>ğŸ’¡ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ã«ã¤ã„ã¦</h4>
                <p>ã“ã“ã§å„ã‚¸ãƒ£ãƒ³ãƒ«ç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆãƒ»ç®¡ç†ã§ãã¾ã™ã€‚</p>
                <p>å¤–æ³¨ä½œæ¥­æ™‚ã¯ã€Œè¨˜äº‹æŠ½å‡ºã€ã‚¿ãƒ–ã§ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã™ã‚‹ã ã‘ã§ã€é©åˆ‡ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè‡ªå‹•ã§çµ„ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚</p>
            </div>

            <h3>æ–°ã—ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¿½åŠ </h3>
            <input type="text" id="newGenre" placeholder="ã‚¸ãƒ£ãƒ³ãƒ«åï¼ˆä¾‹ï¼šãƒªãƒ•ã‚©ãƒ¼ãƒ ã€åŒ»ç™‚ã€ä¸å‹•ç”£ï¼‰">
            <textarea id="newPrompt" rows="8" placeholder="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…å®¹ã‚’å…¥åŠ›&#10;ä¾‹ï¼š&#10;ã‚µã‚¤ãƒˆè¨˜äº‹ã®ã‚´ãƒ¼ãƒ«ï¼šç¦å²¡å¸‚æ±åŒºã§ãƒªãƒ•ã‚©ãƒ¼ãƒ åˆã¯ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›¸è«‡äºˆç´„ã‚’å¢—ã‚„ã™ã“ã¨&#10;ç›®æ¨™ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š{keyword}&#10;é–¢é€£ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼šãƒªãƒ•ã‚©ãƒ¼ãƒ ç¦å²¡å¸‚ã€ãƒªãƒ•ã‚©ãƒ¼ãƒ ç¦å²¡å¸‚æ±åŒº..."></textarea>
            <button onclick="addPrompt()">â• ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¿½åŠ </button>

            <h3>ç™»éŒ²æ¸ˆã¿ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¸€è¦§</h3>
            <div id="promptsList"></div>
            
            <h3>åˆæœŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å¾©å…ƒ</h3>
            <button class="secondary" onclick="loadDefaultPrompts()">ğŸ”„ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’èª­ã¿è¾¼ã¿</button>
        </div>

        <!-- è¨˜äº‹æŠ½å‡ºã‚¿ãƒ– -->
        <div id="extraction-tab" class="tab-content">
            <h2>ğŸ“„ è¨˜äº‹æŠ½å‡º</h2>
            
            <div class="genre-selector">
                <h3>ğŸ¯ ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠ</h3>
                <select id="genreSelect" onchange="updateGenreSelection()">
                    <option value="">ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
                </select>
                <div id="selectedPromptPreview" class="hidden">
                    <h4>é¸æŠä¸­ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:</h4>
                    <div id="promptPreview" style="background: white; padding: 10px; border-radius: 4px; border: 1px solid #ddd; max-height: 100px; overflow-y: auto; font-size: 12px;"></div>
                </div>
            </div>

            <h3>è¨˜äº‹æƒ…å ±</h3>
            <input type="text" id="keyword" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰">
            <textarea id="urls" rows="6" placeholder="URLä¸€è¦§ï¼ˆ1è¡Œã«1ã¤ï¼‰"></textarea>
            <button onclick="prepareExtraction()">ğŸ“‹ è¨˜äº‹ãƒªã‚¹ãƒˆä½œæˆ</button>
            
            <div id="urlList" class="hidden">
                <h3>ğŸ“‹ è¨˜äº‹ä¸€è¦§</h3>
                <div id="urlItems"></div>
            </div>
            
            <div id="manualInput" class="hidden">
                <div class="manual-section">
                    <h4>ğŸ“ è¨˜äº‹å†…å®¹ã®å…¥åŠ›</h4>
                    <p><strong>ç¾åœ¨å‡¦ç†ä¸­ï¼š</strong> <span id="currentUrl"></span></p>
                    <p><strong>æ“ä½œï¼š</strong> è¨˜äº‹ãƒšãƒ¼ã‚¸ã§å…¨é¸æŠï¼ˆCtrl+Aï¼‰â†’ ã‚³ãƒ”ãƒ¼ï¼ˆCtrl+Cï¼‰â†’ ä¸‹ã«è²¼ã‚Šä»˜ã‘ï¼ˆCtrl+Vï¼‰</p>
                    <textarea id="articleContent" rows="12" placeholder="è¨˜äº‹ã®å†…å®¹ã‚’å…¨ã¦ã“ã“ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„"></textarea>
                    <button onclick="previewContent()">ğŸ” ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º</button>
                    <button onclick="addArticleAuto()">ğŸ”„ è‡ªå‹•å‡¦ç†ã—ã¦ã“ã®è¨˜äº‹ã‚’è¿½åŠ </button>
                    <button onclick="skipArticle()">â­ï¸ ã‚¹ã‚­ãƒƒãƒ—</button>
                    
                    <div id="preview" class="preview hidden">
                        <h5>ğŸ“‹ æŠ½å‡ºãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h5>
                        <p><strong>æŠ½å‡ºã•ã‚Œã‚‹ã‚¿ã‚¤ãƒˆãƒ«:</strong> <span id="previewTitle"></span></p>
                        <p><strong>ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å¾Œæ–‡å­—æ•°:</strong> <span id="previewWordCount"></span></p>
                        <p><strong>å†…å®¹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆæœ€åˆã®200æ–‡å­—ï¼‰:</strong></p>
                        <div id="previewContent" style="background: white; padding: 10px; border-radius: 4px; border: 1px solid #ddd; max-height: 100px; overflow-y: auto;"></div>
                    </div>
                </div>
            </div>
            
            <div id="output" class="hidden">
                <h3>ğŸ“¤ Claude AIæŠ•å…¥ç”¨å®Œæˆãƒ‡ãƒ¼ã‚¿</h3>
                <textarea id="result" rows="25" readonly></textarea>
                <button onclick="copyResult()">ğŸ“‹ Claude AIã«ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ</button>
            </div>
        </div>

        <div id="status" class="status hidden"></div>
    </div>

    <script>
        let prompts = {};
        let urls = [];
        let currentIndex = 0;
        let articles = [];
        let selectedGenre = '';
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        window.onload = function() {
            loadPrompts();
            updateGenreSelect();
            updatePromptsList();
        };

        function switchTab(tabName) {
            // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
            
            // ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        function showStatus(msg, type) {
            const status = document.getElementById('status');
            status.textContent = msg;
            status.className = 'status ' + type;
            status.classList.remove('hidden');
            setTimeout(() => status.classList.add('hidden'), 5000);
        }

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†æ©Ÿèƒ½
        function loadPrompts() {
            const saved = localStorage.getItem('customPrompts');
            if (saved) {
                prompts = JSON.parse(saved);
            } else {
                loadDefaultPrompts();
            }
        }

        function savePrompts() {
            localStorage.setItem('customPrompts', JSON.stringify(prompts));
        }

        function loadDefaultPrompts() {
            prompts = {
                "ãƒªãƒ•ã‚©ãƒ¼ãƒ ãƒ»ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³": `ã€æŒ‡ç¤ºæ–‡â‘ ã€‘

ï¼ƒã‚µã‚¤ãƒˆè¨˜äº‹ã®ã‚´ãƒ¼ãƒ«ï¼šç¦å²¡å¸‚æ±åŒºã§ãƒªãƒ•ã‚©ãƒ¼ãƒ åˆã¯ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›¸è«‡äºˆç´„ã‚’å¢—ã‚„ã™ã“ã¨
ï¼ƒç›®æ¨™ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š{keyword}
ï¼ƒä¸Šä½2-3è¨˜äº‹ã‚’ã¾ã¨ã‚ã¦æ›¸ã„ãŸã‚ªãƒªã‚¸ãƒŠãƒ«è¨˜äº‹ãŒä¸‹è¨˜
ï¼ƒé›†å®¢ã®ãŸã‚ã«é–¢é€£ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼šãƒªãƒ•ã‚©ãƒ¼ãƒ ç¦å²¡å¸‚ã€ãƒªãƒ•ã‚©ãƒ¼ãƒ ç¦å²¡å¸‚æ±åŒºã€ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¦å²¡å¸‚ã€ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¦å²¡å¸‚æ±åŒºã€ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒªãƒ•ã‚©ãƒ¼ãƒ  ç¦å²¡å¸‚æ±åŒºã€ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ ç¦å²¡å¸‚æ±åŒºã€æˆ¸å»ºã¦ãƒªãƒ•ã‚©ãƒ¼ãƒ  ç¦å²¡å¸‚æ±åŒºã€æˆ¸å»ºã¦ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ ç¦å²¡å¸‚æ±åŒºã€æ°´å›ã‚Šãƒªãƒ•ã‚©ãƒ¼ãƒ  ç¦å²¡å¸‚æ±åŒºã€æ°´å›ã‚Šãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ ç¦å²¡å¸‚æ±åŒº

#ä¸‹è¨˜ã¯ã‚¯ãƒ­ãƒ¼ãƒ‰AIã§ä½œæˆã™ã‚‹SEOã§ä¸Šä½ã‚’ç›®æŒ‡ã™è¨˜äº‹ã§ã™ã€‚ã“ã®è¨˜äº‹ã®è©•ä¾¡ãŒé«˜ããªã‘ã‚Œã°ã‚ˆã‚Šè‰¯ã„ã‚‚ã®ã«ã—ã¦ãã ã•ã„ã€‚

å­—æ•°4000ã‹ã‚‰8000æ–‡å­—ã€æ–‡ç« ã‚’ãƒ¡ã‚¤ãƒ³ã«è¦æ‰€ã«ç®‡æ¡æ›¸ããƒ»è¡¨ã‚’ç”¨ã„ã¦èª­ã¿ã‚„ã™ãã€‚

ã€æŒ‡ç¤ºæ–‡â‘¡ã€‘
è¨˜äº‹ä½œæˆå®Œäº†å¾Œã€ã“ã®è¨˜äº‹ã®ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚`,

                "åŒ»ç™‚ãƒ»ã‚¯ãƒªãƒ‹ãƒƒã‚¯": `ã€æŒ‡ç¤ºæ–‡â‘ ã€‘

ï¼ƒã‚µã‚¤ãƒˆè¨˜äº‹ã®ã‚´ãƒ¼ãƒ«ï¼šæ±äº¬éƒ½ã§æ­¯ç§‘çŸ¯æ­£ã®ç›¸è«‡äºˆç´„ã‚’å¢—ã‚„ã™ã“ã¨
ï¼ƒç›®æ¨™ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š{keyword}
ï¼ƒä¸Šä½2-3è¨˜äº‹ã‚’ã¾ã¨ã‚ã¦æ›¸ã„ãŸã‚ªãƒªã‚¸ãƒŠãƒ«è¨˜äº‹ãŒä¸‹è¨˜
ï¼ƒé›†å®¢ã®ãŸã‚ã«é–¢é€£ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼šæ­¯ç§‘çŸ¯æ­£ æ±äº¬, ã‚¤ãƒ³ãƒ“ã‚¶ãƒ©ã‚¤ãƒ³ æ±äº¬, çŸ¯æ­£æ­¯ç§‘ æ±äº¬, æ­¯åˆ—çŸ¯æ­£ è²»ç”¨, å¤§äºº æ­¯ç§‘çŸ¯æ­£

#ä¸‹è¨˜ã¯ã‚¯ãƒ­ãƒ¼ãƒ‰AIã§ä½œæˆã™ã‚‹SEOã§ä¸Šä½ã‚’ç›®æŒ‡ã™è¨˜äº‹ã§ã™ã€‚ã“ã®è¨˜äº‹ã®è©•ä¾¡ãŒé«˜ããªã‘ã‚Œã°ã‚ˆã‚Šè‰¯ã„ã‚‚ã®ã«ã—ã¦ãã ã•ã„ã€‚

å­—æ•°3000ã‹ã‚‰6000æ–‡å­—ã€æ–‡ç« ã‚’ãƒ¡ã‚¤ãƒ³ã«è¦æ‰€ã«ç®‡æ¡æ›¸ããƒ»è¡¨ã‚’ç”¨ã„ã¦èª­ã¿ã‚„ã™ãã€‚åŒ»ç™‚åºƒå‘Šã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³æº–æ‹ ã€‚

ã€æŒ‡ç¤ºæ–‡â‘¡ã€‘
è¨˜äº‹ä½œæˆå®Œäº†å¾Œã€ã“ã®è¨˜äº‹ã®ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚`,

                "ä¸å‹•ç”£": `ã€æŒ‡ç¤ºæ–‡â‘ ã€‘

ï¼ƒã‚µã‚¤ãƒˆè¨˜äº‹ã®ã‚´ãƒ¼ãƒ«ï¼šå¤§é˜ªå¸‚ã§ä¸å‹•ç”£å£²å´ã®æŸ»å®šä¾é ¼ã‚’å¢—ã‚„ã™ã“ã¨
ï¼ƒç›®æ¨™ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š{keyword}
ï¼ƒä¸Šä½2-3è¨˜äº‹ã‚’ã¾ã¨ã‚ã¦æ›¸ã„ãŸã‚ªãƒªã‚¸ãƒŠãƒ«è¨˜äº‹ãŒä¸‹è¨˜
ï¼ƒé›†å®¢ã®ãŸã‚ã«é–¢é€£ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼šä¸å‹•ç”£å£²å´ å¤§é˜ª, ãƒãƒ³ã‚·ãƒ§ãƒ³æŸ»å®š å¤§é˜ª, æˆ¸å»ºã¦å£²å´ å¤§é˜ª, ä¸å‹•ç”£æŸ»å®š ç„¡æ–™

#ä¸‹è¨˜ã¯ã‚¯ãƒ­ãƒ¼ãƒ‰AIã§ä½œæˆã™ã‚‹SEOã§ä¸Šä½ã‚’ç›®æŒ‡ã™è¨˜äº‹ã§ã™ã€‚ã“ã®è¨˜äº‹ã®è©•ä¾¡ãŒé«˜ããªã‘ã‚Œã°ã‚ˆã‚Šè‰¯ã„ã‚‚ã®ã«ã—ã¦ãã ã•ã„ã€‚

å­—æ•°4000ã‹ã‚‰6000æ–‡å­—ã€æ–‡ç« ã‚’ãƒ¡ã‚¤ãƒ³ã«è¦æ‰€ã«ç®‡æ¡æ›¸ããƒ»è¡¨ãƒ»äº‹ä¾‹ã‚’ç”¨ã„ã¦èª­ã¿ã‚„ã™ãã€‚

ã€æŒ‡ç¤ºæ–‡â‘¡ã€‘
è¨˜äº‹ä½œæˆå®Œäº†å¾Œã€ã“ã®è¨˜äº‹ã®ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚`
            };
            savePrompts();
            updatePromptsList();
            updateGenreSelect();
            showStatus('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ', 'success');
        }

        function addPrompt() {
            const genre = document.getElementById('newGenre').value.trim();
            const prompt = document.getElementById('newPrompt').value.trim();
            
            if (!genre || !prompt) {
                showStatus('ã‚¸ãƒ£ãƒ³ãƒ«åã¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            prompts[genre] = prompt;
            savePrompts();
            updatePromptsList();
            updateGenreSelect();
            
            document.getElementById('newGenre').value = '';
            document.getElementById('newPrompt').value = '';
            
            showStatus(`ã€Œ${genre}ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸ`, 'success');
        }

        function editPrompt(genre) {
            const newPrompt = prompt(`ã€Œ${genre}ã€ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç·¨é›†:`, prompts[genre]);
            if (newPrompt !== null && newPrompt.trim()) {
                prompts[genre] = newPrompt.trim();
                savePrompts();
                updatePromptsList();
                showStatus(`ã€Œ${genre}ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ›´æ–°ã—ã¾ã—ãŸ`, 'success');
            }
        }

        function deletePrompt(genre) {
            if (confirm(`ã€Œ${genre}ã€ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                delete prompts[genre];
                savePrompts();
                updatePromptsList();
                updateGenreSelect();
                showStatus(`ã€Œ${genre}ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å‰Šé™¤ã—ã¾ã—ãŸ`, 'success');
            }
        }

        function updatePromptsList() {
            const list = document.getElementById('promptsList');
            list.innerHTML = '';
            
            if (Object.keys(prompts).length === 0) {
                list.innerHTML = '<p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
                return;
            }

            Object.keys(prompts).forEach(genre => {
                const item = document.createElement('div');
                item.className = 'prompt-item';
                item.innerHTML = `
                    <h4>${genre}</h4>
                    <div style="max-height: 100px; overflow-y: auto; background: white; padding: 10px; border-radius: 4px; border: 1px solid #ddd; font-size: 12px;">
                        ${prompts[genre].replace(/\n/g, '<br>')}
                    </div>
                    <div class="prompt-actions">
                        <button onclick="editPrompt('${genre}')" class="secondary">âœï¸ ç·¨é›†</button>
                        <button onclick="deletePrompt('${genre}')" class="danger">ğŸ—‘ï¸ å‰Šé™¤</button>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        function updateGenreSelect() {
            const select = document.getElementById('genreSelect');
            select.innerHTML = '<option value="">ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</option>';
            
            Object.keys(prompts).forEach(genre => {
                const option = document.createElement('option');
                option.value = genre;
                option.textContent = genre;
                select.appendChild(option);
            });
        }

        function updateGenreSelection() {
            const select = document.getElementById('genreSelect');
            selectedGenre = select.value;
            
            if (selectedGenre) {
                document.getElementById('promptPreview').innerHTML = prompts[selectedGenre].replace(/\n/g, '<br>');
                document.getElementById('selectedPromptPreview').classList.remove('hidden');
                showStatus(`ã€Œ${selectedGenre}ã€ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã—ã¾ã—ãŸ`, 'success');
            } else {
                document.getElementById('selectedPromptPreview').classList.add('hidden');
            }
        }

        // è¨˜äº‹æŠ½å‡ºæ©Ÿèƒ½ï¼ˆæ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’çµ±åˆï¼‰
        function prepareExtraction() {
            if (!selectedGenre) {
                showStatus('ã¾ãšã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„', 'error');
                return;
            }

            const keyword = document.getElementById('keyword').value.trim();
            const urlText = document.getElementById('urls').value.trim();
            
            if (!keyword || !urlText) {
                showStatus('ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            urls = urlText.split('\n').filter(line => line.trim() && line.startsWith('http'));
            if (urls.length === 0) {
                showStatus('æœ‰åŠ¹ãªURLãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'error');
                return;
            }

            articles = [];
            displayUrlList();
            showStatus(`${urls.length}ä»¶ã®è¨˜äº‹ãƒªã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸ`, 'success');
        }

        function displayUrlList() {
            const urlItems = document.getElementById('urlItems');
            urlItems.innerHTML = '';
            
            urls.forEach((url, index) => {
                const item = document.createElement('div');
                item.className = 'url-item';
                item.innerHTML = `
                    <div style="margin-bottom: 10px;">
                        <strong>è¨˜äº‹${index + 1}:</strong>
                        <a href="${url}" target="_blank" class="url-link">${url}</a>
                    </div>
                    <button onclick="startInputForArticle(${index})" style="width: auto; padding: 8px 16px; margin: 5px 0;">
                        ğŸ“ ã“ã®è¨˜äº‹ã®å†…å®¹ã‚’å…¥åŠ›
                    </button>
                `;
                urlItems.appendChild(item);
            });
            
            document.getElementById('urlList').classList.remove('hidden');
        }

        function startInputForArticle(index) {
            currentIndex = index;
            const url = urls[index];
            
            document.getElementById('currentUrl').textContent = url;
            document.getElementById('articleContent').value = '';
            document.getElementById('preview').classList.add('hidden');
            document.getElementById('manualInput').classList.remove('hidden');
            
            window.open(url, '_blank');
            showStatus('è¨˜äº‹ãƒšãƒ¼ã‚¸ã§å…¨é¸æŠï¼ˆCtrl+Aï¼‰â†’ ã‚³ãƒ”ãƒ¼ï¼ˆCtrl+Cï¼‰â†’ ä¸‹ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„', 'loading');
        }

        function previewContent() {
            const rawContent = document.getElementById('articleContent').value.trim();
            
            if (!rawContent) {
                showStatus('ã¾ãšè¨˜äº‹å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„', 'error');
                return;
            }

            if (rawContent.length < 100) {
                showStatus('è¨˜äº‹å†…å®¹ãŒçŸ­ã™ãã¾ã™ã€‚è¨˜äº‹å…¨ä½“ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            const extracted = extractTitleAndContent(rawContent);
            
            document.getElementById('previewTitle').textContent = extracted.title;
            document.getElementById('previewWordCount').textContent = extracted.cleanContent.length + 'æ–‡å­—';
            document.getElementById('previewContent').textContent = extracted.cleanContent.substring(0, 200) + '...';
            document.getElementById('preview').classList.remove('hidden');
            
            showStatus('ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã—ã¾ã—ãŸã€‚å•é¡Œãªã‘ã‚Œã°ã€Œè‡ªå‹•å‡¦ç†ã—ã¦è¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„', 'success');
        }

        function extractTitleAndContent(rawContent) {
            let lines = rawContent.split('\n').filter(line => line.trim());
            
            let title = 'ã‚¿ã‚¤ãƒˆãƒ«ä¸æ˜';
            for (let line of lines) {
                const cleanLine = line.trim();
                if (cleanLine.length > 8 && cleanLine.length < 120 && 
                    !cleanLine.includes('ãƒ¡ãƒ‹ãƒ¥ãƒ¼') && !cleanLine.includes('ãƒŠãƒ“') &&
                    !cleanLine.includes('ãƒ›ãƒ¼ãƒ ') && !cleanLine.includes('ã‚µã‚¤ãƒˆ') &&
                    !cleanLine.includes('æ¤œç´¢') && !cleanLine.includes('ãƒ­ã‚°ã‚¤ãƒ³') &&
                    !cleanLine.includes('ã‚«ãƒ†ã‚´ãƒª') && !cleanLine.includes('ã‚¿ã‚°')) {
                    title = cleanLine;
                    break;
                }
            }

            const cleanContent = cleanContentAdvanced(rawContent);
            return { title, cleanContent };
        }

        function addArticleAuto() {
            const rawContent = document.getElementById('articleContent').value.trim();
            
            if (!rawContent) {
                showStatus('è¨˜äº‹å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
                return;
            }

            const extracted = extractTitleAndContent(rawContent);
            
            const article = {
                url: urls[currentIndex],
                title: extracted.title,
                content: extracted.cleanContent,
                wordCount: extracted.cleanContent.length,
                originalWordCount: rawContent.length
            };

            articles.push(article);
            
            showStatus(`è¨˜äº‹${currentIndex + 1}ã‚’è¿½åŠ ã—ã¾ã—ãŸ (${article.originalWordCount}â†’${article.wordCount}æ–‡å­—)`, 'success');
            
            document.getElementById('articleContent').value = '';
            document.getElementById('preview').classList.add('hidden');
            
            markArticleAsProcessed(currentIndex);
            
            if (articles.length === urls.length) {
                generateFinalResult();
                document.getElementById('manualInput').classList.add('hidden');
            }
        }

        function skipArticle() {
            showStatus(`è¨˜äº‹${currentIndex + 1}ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã—ãŸ`, 'loading');
            markArticleAsSkipped(currentIndex);
            document.getElementById('articleContent').value = '';
            document.getElementById('preview').classList.add('hidden');
        }

        function markArticleAsProcessed(index) {
            const urlItems = document.getElementById('urlItems').children[index];
            const button = urlItems.querySelector('button');
            button.textContent = 'âœ… å‡¦ç†æ¸ˆã¿';
            button.disabled = true;
            button.style.background = '#28a745';
        }

        function markArticleAsSkipped(index) {
            const urlItems = document.getElementById('urlItems').children[index];
            const button = urlItems.querySelector('button');
            button.textContent = 'â­ï¸ ã‚¹ã‚­ãƒƒãƒ—æ¸ˆã¿';
            button.disabled = true;
            button.style.background = '#6c757d';
        }

        function cleanContentAdvanced(rawContent) {
            let cleaned = rawContent;
            
            cleaned = cleaned.replace(/<[^>]*>/g, '');
            
            const entityMap = {
                '&amp;': '&', '&lt;': '<', '&gt;': '>', '&quot;': '"',
                '&#039;': "'", '&nbsp;': ' ', '&copy;': 'Â©', '&reg;': 'Â®'
            };
            cleaned = cleaned.replace(/&[a-zA-Z0-9#]+;/g, entity => entityMap[entity] || '');
            
            const unwantedPatterns = [
                /åºƒå‘Š[\s\S]*?(?=\n|$)/gi, /ç›®æ¬¡[\s\S]*?(?=\n|$)/gi, /é–¢é€£è¨˜äº‹[\s\S]*?(?=\n|$)/gi,
                /ãƒ¡ãƒ‹ãƒ¥ãƒ¼[\s\S]*?(?=\n|$)/gi, /ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³[\s\S]*?(?=\n|$)/gi, /ãƒ•ãƒƒã‚¿ãƒ¼[\s\S]*?(?=\n|$)/gi,
                /ãƒ˜ãƒƒãƒ€ãƒ¼[\s\S]*?(?=\n|$)/gi, /ã‚µã‚¤ãƒ‰ãƒãƒ¼[\s\S]*?(?=\n|$)/gi, /ã‚¹ãƒãƒ³ã‚µãƒ¼[\s\S]*?(?=\n|$)/gi,
                /ç¶šãã‚’èª­ã‚€[\s\S]*?(?=\n|$)/gi, /ã‚·ã‚§ã‚¢[\s\S]*?(?=\n|$)/gi, /ã„ã„ã­[\s\S]*?(?=\n|$)/gi,
                /ã‚³ãƒ¡ãƒ³ãƒˆ[\s\S]*?(?=\n|$)/gi, /Cookie[\s\S]*?(?=\n|$)/gi, /ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼[\s\S]*?(?=\n|$)/gi
            ];
            
            unwantedPatterns.forEach(pattern => {
                cleaned = cleaned.replace(pattern, '');
            });
            
            cleaned = cleaned.replace(/\s+/g, ' ');
            cleaned = cleaned.replace(/\n\s*\n\s*\n+/g, '\n\n');
            cleaned = cleaned.replace(/^\s+|\s+$/gm, '');
            
            return cleaned.trim();
        }

        function generateFinalResult() {
            const keyword = document.getElementById('keyword').value.trim();
            
            // é¸æŠã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’åŸ‹ã‚è¾¼ã¿
            let finalPrompt = prompts[selectedGenre].replace(/{keyword}/g, keyword);
            
            let result = finalPrompt + '\n\n';
            result += 'ã€å‚è€ƒè¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã€‘\n';
            result += `æŠ½å‡ºæ—¥æ™‚: ${new Date().toLocaleString('ja-JP')}\n`;
            result += `å‡¦ç†è¨˜äº‹æ•°: ${articles.length}ä»¶\n\n`;

            articles.forEach((article, index) => {
                result += `=== å‚è€ƒè¨˜äº‹${index + 1} ===\n`;
                result += `å‚ç…§URL: ${article.url}\n`;
                result += `è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«: ${article.title}\n`;
                result += `æŠ½å‡ºæ–‡å­—æ•°: ${article.wordCount}æ–‡å­—\n\n`;
                result += `ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æ¸ˆã¿å†…å®¹ã€‘\n${article.content}\n\n`;
                result += '='.repeat(60) + '\n\n';
            });

            document.getElementById('result').value = result;
            document.getElementById('output').classList.remove('hidden');
            showStatus('Claude AIæŠ•å…¥ç”¨ãƒ‡ãƒ¼ã‚¿ãŒå®Œæˆã—ã¾ã—ãŸï¼', 'success');
        }

        function copyResult() {
            const result = document.getElementById('result');
            result.select();
            document.execCommand('copy');
            showStatus('Claude AIæŠ•å…¥ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚Claude AIã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼', 'success');
        }
    </script>
</body>
</html>
